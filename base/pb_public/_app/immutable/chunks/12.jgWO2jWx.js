import"./disclose-version.15-3dQtY.js";import{u as Ha,r as ia,p as Ja,z as f,q as ra,b as D,a as Qa,a1 as da,y as i,s as qa,A as d,a2 as Va}from"./runtime.bbI-llpg.js";import{e as va}from"./each.EYzjG2Rp.js";import{t as g,F as la,g as oa,w as G,x as sa,a as t,b as a,v as Wa,E as Pa,M as Xa,N as na,O as Ya,c as w,z as ua,A as M,o as y,s as _a,C as c,p as Za,f as $a,P as at,G as tt,D as Sa,d as b}from"./render.xdaRgOar.js";import{d as L,l as N,t as Da}from"./db.DaXTXu79.js";import{o as et}from"./main-client.tx5f1FhV.js";import{t as it}from"./lang.ucBuaWId.js";import{f as rt,a as Ma}from"./fnSelect.wqP3uKO_.js";var dt=(U,B)=>f(B,!1),vt=b('<div><iframe title="SS"></iframe></div>'),lt=b('<form><h1 text-lg="" mb-3=""> </h1> <div h-80vh="" overflow-auto=""><p pb-5=""> </p> <div grid="" grid-cols-1="" gap-5=""><div form-control="" max-w-full=""><span>Opsi Penilaian</span> <div><textarea input="" filter="" placeholder="Pilih Opsi" min-h-8="" rounded-box=""></textarea> <input type="hidden" selected> <div relative="" w-full=""><ul menu="" top-0="" hidden absolute="" bg-base="" h-48="" z-10="" overflow-auto="" rounded-box="" shadow=""><li option=""><label flex="" gap-2="" cursor-pointer=""><input type="checkbox" checkbox="" shrink-0="" tabindex="-1"> <div option-label=""></div></label></li></ul></div></div></div> <div form-control="" max-w-full=""><span>Keterangan</span> <textarea input="" rows="3" h-auto="" rounded-box=""></textarea></div> <div form-control="" max-w-full=""><input type="file" input="" multiple> <div><div carousel="" w-full="" rounded-box="" min-h-40vh="" border=""></div></div></div></div></div> <div><button btn="~ primary"><i></i> </button></div></form>'),ot=b('<div absolute="" top-0="" z-20="" w-full="" h-2="" bg-neutral="" animate-pulse="" animate-count-infinite=""></div>'),st=b('<tr sticky="" top-30="" bg-base-b="" h-20=""><th><div text-center=""> </div></th><th></th><td> </td><th></th><td></td></tr>'),nt=b('<div bg-base-a="" px-2="" rounded-box=""> </div>'),ut=b('<tr><td text-center=""><div> </div></td><td> </td><td><div tabindex="0" collapse="" collapse-arrow="" px-0=""><div collapse-title="" pr-2=""> </div> <div><p> </p></div></div> <div pl-3="" border-l-4="" mb-3="" whitespace-pre-wrap=""><!></div> <div flex="" flex-wrap="" gap-1=""><button btn="~ xs"><i i-bx-edit-alt=""></i></button> <!></div></td><td> </td><td w-64=""><div><textarea input="" filter="" placeholder="Pilih Opsi" min-h-8="" rounded-box=""></textarea> <input type="hidden" selected> <div relative="" w-full=""><ul menu="" top-0="" hidden absolute="" bg-base="" h-48="" z-10="" overflow-auto="" rounded-box="" shadow=""><li option=""><label flex="" gap-2="" cursor-pointer=""><input type="checkbox" checkbox="" shrink-0="" tabindex="-1"> <div option-label=""></div></label></li></ul></div></div></td></tr>'),_t=b('<div modal=""><div w-5xl="" max-w-full=""><button modal-close="">&times;</button> <!></div></div> <div><div sticky="" top-0="" z-10="" bg-base-a="" pt-15="" pb-3=""><div flex="" gap-5=""><h1 text-xl=""> </h1> <button btn="~ sm circle outline" aria-label="Refresh" p-.5=""><i i-bx-refresh="" animate-reverse=""></i></button></div> <div><div flex=""><a href="../" btn="~ xs"> </a></div></div></div> <div bg-base="" min-h-70vh="" relative=""><!> <div><table table=""><tbody></tbody></table></div></div></div>',!0);const pt=!0;function ct(U,B){Qa(B,!1);const H={};Ha(H);const x=()=>qa(N,"$loading",H),j=()=>qa(it,"$t",H);let J=ra(),Q="",k=ra(),e=ra();et(async()=>{Q=location.search.replace("?",""),await V()});async function V(){D(N,!0),f(J,await L.collection("auditsResult").getList(1,500,{filter:`template.id="indeks_kami_4_2" && (audit.id = "${Q}" || audit = "")`,sort:"code",requestKey:"ikami"})),setTimeout(()=>D(N,!1),500)}async function pa(){D(N,!0);try{const v={template:i(e).template,audit:Q,question:i(e).id,answer:i(e).answer,score:i(e).score,media:i(e).file?[...i(e).file]:void 0};console.log(v,i(e)),i(e).aid?await L.collection("auditsDetail").update(i(e).aid,v):await L.collection("auditsDetail").create(v),D(Da,[{action:j()("action.saved")}])}catch(v){console.log(v),D(Da,[{error:v?.data}])}f(k,!1),V()}var ca=tt(U,!0,_t),A=ua(ca),ja=t(A),fa=t(ja),Aa=a(a(fa)),Ia=a(a(A)),ba=t(Ia),xa=t(ba),ma=t(xa),Ka=t(ma),ha=a(a(ma)),Ra=t(ha),Ta=a(a(xa)),Ca=t(Ta),Ea=t(Ca),Fa=t(Ea),Ga=a(a(ba)),ga=t(Ga),La=a(a(ga)),wa=t(La),Na=t(wa);g(Ka,()=>j()("audit.indekskami.title")),g(Fa,()=>j()("all.list")),ia(()=>{M(Ra,"animate-spin",x()),M(wa,"opacity-50",x())}),la(A,(v,r)=>rt(v,r),()=>i(k)),oa("close",A,()=>f(k,!1),!1),fa.__click=[dt,k],G(Aa,()=>i(e),v=>{var r=y(v,!0,lt),W=t(r),I=t(W),K=a(a(W)),o=t(K),s=t(o),n=a(a(o)),m=t(n),z=t(m),u=a(a(z)),O=t(u),_=a(a(O));Pa(_);var q=a(a(m)),R=t(q),T=a(a(R));Xa(T);var X=a(a(q)),C=t(X),Y=a(a(C)),E=t(Y),Z=a(a(K)),$=t(Z),p=t($),aa=a(p);g(aa,()=>` ${_a(j()("save.btn"))}`),ia(()=>{c(I,`${_a(i(e).question)} (${_a(i(e).score)})`),c(s,i(e).hint),M(p,"i-bx-save",!x()),M(p,"i-bx-refresh",x()),M(p,"animate-spin",x())}),oa("submit",r,Za(pa),!1),la(u,(l,P)=>Ma(l,P),()=>i(e).options),na(_,()=>i(e).score,l=>da(e,i(e).score=l)),na(T,()=>i(e).answer,l=>da(e,i(e).answer=l)),Ya("files","change","set",C,()=>i(e).file,l=>da(e,i(e).file=l)),va(E,()=>i(e).media,9,(l,P,ya)=>{var S=y(l,!0,vt),ta=t(S);$a(ta,"src",()=>L.files.getUrl(i(e),d(P))),w(l,S)},null),w(v,r)},null),ha.__click=V,G(ga,x,v=>{var r=y(v,!0,ot);w(v,r)},null),va(Na,()=>i(J)?.items||[],9,(v,r,W)=>{var I=Sa(v),K=ua(I);G(K,()=>d(r).meta?.title,o=>{var s=y(o,!0,st),n=t(s),m=t(n),z=t(m),u=a(n),O=a(u),_=t(O);g(z,()=>d(r).code.split("..").at(0)),g(_,()=>d(r).question),w(o,s)},o=>{var s=y(o,!0,ut),n=t(s),m=t(n),z=t(m),u=a(n),O=t(u),_=a(u),q=t(_),R=t(q),T=t(R),X=a(a(R)),C=t(X),Y=t(C),E=a(a(q)),Z=t(E);at(Z,()=>d(r).answer,!1);var $=a(a(E)),p=t($),aa=a(a(p)),l=a(_),P=t(l),ya=a(l),S=t(ya),ta=t(S),ea=a(a(ta));Pa(ea),ia(()=>{c(z,d(r).code),c(O,d(r).meta?.level||""),c(T,d(r).question),c(Y,d(r).hint),c(P,d(r).score)}),p.__click=()=>{f(e,d(r)),f(k,!0)},G(aa,()=>d(r).media.length>0,h=>{var F=Sa(h),Ua=ua(F);va(Ua,()=>d(r).media,1,(ka,za,ft)=>{var Oa=y(ka,!0,nt),Ba=t(Oa);g(Ba,()=>d(za).substr(0,d(za).lastIndexOf("_"))),w(ka,Oa)},null),sa(h,F)},null),la(S,(h,F)=>Ma(h,F),()=>d(r).options),na(ea,()=>d(r).score,h=>(d(r).score=h,Va(()=>i(J)?.items||[]))),oa("input",ea,()=>{f(e,d(r)),pa()},!1),w(o,s)}),sa(v,I)},null),sa(U,ca),Ja()}Wa(["click"]);const zt=Object.freeze(Object.defineProperty({__proto__:null,default:ct,hidden:pt},Symbol.toStringTag,{value:"Module"}));export{ct as _,zt as a};
